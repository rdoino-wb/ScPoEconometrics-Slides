<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Think Large, Dive Deep: Mastering Administrative Data</title>
    <meta charset="utf-8" />
    <meta name="author" content="Ruggero Doino" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <script src="https://use.fontawesome.com/5235085b15.js"></script>
    <link rel="stylesheet" href="../css/scpo.css" type="text/css" />
    <link rel="stylesheet" href="../css/scpo-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Think Large, Dive Deep: Mastering Administrative Data
]
.subtitle[
## Designing, Manipulating and Visualizing
]
.author[
### Ruggero Doino
]
.date[
### DIME 3 </br> 2023-09-05
]

---


background-image: "../img/logo/WBG_Vertical-RGB-high.png"
background-position: bottom left
background-size: 110px 120px
layout: true

---



  
# Working With Data

* Econometrics is about `data`.

&lt;img src="chapter_tidy_files/figure-html/data_science_pipeline.png" width="400px" style="display: block; margin: auto;" /&gt;

--

* According a to [2014 NYTimes article](https://www.nytimes.com/2014/08/18/technology/for-big-data-scientists-hurdle-to-insights-is-janitor-work.html), "data scientists [...] spend from ***50 percent to 80 percent of their time*** mired in this more mundane labor of collecting and preparing unruly digital data, before it can be explored for useful nuggets."

* In the next hour you will learn how to approach ***large***, ***nested*** and ***administrative*** data

---

layout: false
class: title-slide-section-red, middle

# What we have in our toolbox 🧰

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Pacakges we all use daily 

.pull-left-narrow[.center[&lt;img src="../img/logo/dplyr.png" width="125px"/&gt;]]
.pull-right-wide[
Tyding, Manipulating and Merging
]

--

.pull-left-narrow[.center[&lt;img src="../img/logo/magrittr.svg" width="65px"/&gt;]]

.pull-right-wide[
- The wonder tool ` %&gt;% `... but you will see me using ` |&gt; ` 🤯
]

--

.pull-left-narrow[.center[&lt;img src="../img/logo/lubridate.png" width="65px"/&gt;]]

.pull-right-wide[
Makes [dating](https://lubridate.tidyverse.org/) fun
]

--

.pull-left-narrow[.center[&lt;img src="../img/logo/stringr.png" width="65px"/&gt;]]

.pull-right-wide[
Makes [texting](https://stringr.tidyverse.org/) fun
]

--

.pull-left-narrow[.center[&lt;img src="../img/logo/ggplot2.svg" width="65px"/&gt;]]

.pull-right-wide[
Makes [visualizing](https://ggplot2-book.org/) fun
]

--

.pull-left-narrow[.center[&lt;img src="../img/logo/fixest.png" width="65px"/&gt;]]

.pull-right-wide[
Makes [regressing](https://cran.r-project.org/web/packages/fixest/vignettes/fixest_walkthrough.html/) fun ([STATA users](https://stata2r.github.io/fixest/#installation/)) - [faster](https://github.com/skhiggins/R_guide) than any other R, STATA and Python packages! 
]

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/einsteinoppenheimer.jpg")
background-size: cover

---
layout: true
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Why Aren't You Using data.table Yet?

.left-thin[

### Coincise

]

---

.right-wide[

These two code chunks do the same thing:

**Dplyr**


```r
# library(dplyr)
# data(starwars, package = "dplyr")

starwars %&gt;% 
  filter(species=="Human") %&gt;% 
  group_by(homeworld) %&gt;% 
  summarise(mean_height=mean(height))
```

vs

**Data.Table**


```r
# library(data.table)

starwars_dt = as.data.table(starwars)
starwars_dt[species=="Human", mean(height), by=homeworld]
```

]

---

layout: true
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Why Aren't You Using data.table Yet?

.left-thin[

### Coincise
### Insanely fast

]

---

.right-wide[


```r
# library(dplyr)
# library(data.table)
# library(microbenchmark)
# library(ggplot2)

# 1. Generate a sample data frame
set.seed(123)
n_rows &lt;- 1e5
sample_data &lt;- data.frame(
  id = sample(1:1000, n_rows, replace = TRUE),
  value = rnorm(n_rows)
)
sample_dt &lt;- as.data.table(sample_data)

# 2. Use microbenchmark to measure the time taken
n_replications &lt;- 1000
benchmark_results &lt;- microbenchmark(
  dplyr_group_by = sample_data %&gt;% group_by(id) %&gt;% summarise(mean_value = mean(value)),
  data_table_by = sample_dt[, .(mean_value = mean(value)), by = id],
  times = n_replications
)
```

]

---

.right-wide[

Take a look at this!

.center[&lt;img src="../img/logo/Rplot.png" width="1250px"/&gt;]

Imagine getting back nearly &lt;b&gt;a third of your time&lt;/b&gt;. That's what you would experience on average 😎

]

---

layout: true

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Why Aren't You Using data.table Yet?

.left-thin[

### Coincise
### Insanely fast
### Memory efficient 

]

---

.right-wide[
Diving into [memory usage](https://stackoverflow.com/questions/61376970/data-table-vs-dplyr-memory-use-revisited/61376971#61376971) can get a bit tricky. But, if you want the scoop on how data.table handles it, take a look [here](chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://jangorecki.gitlab.io/r-talks/2019-06-18_Poznan_why-data.table/why-data.table.pdf)!
]

---

layout: true

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 


# Why Aren't You Using data.table Yet?

.left-thin[

### Coincise
### Insanely fast
### Memory efficient 
### Feature rich and Dependency

]

---

I'll group these points because they're all about how your code holds up over time. But let me highlight this about [dependencies](https://www.tinyverse.org/):



```r
options(repos = c(CRAN = "https://cloud.r-project.org/"))
tools::package_dependencies("data.table", recursive = TRUE)[[1]]
```

```
## [1] "methods"
```



```r
options(repos = c(CRAN = "https://cloud.r-project.org/"))
tools::package_dependencies("dplyr", recursive = TRUE)[[1]]
```

```
##  [1] "cli"        "generics"   "glue"       "lifecycle"  "magrittr"  
##  [6] "methods"    "pillar"     "R6"         "rlang"      "tibble"    
## [11] "tidyselect" "utils"      "vctrs"      "fansi"      "utf8"      
## [16] "pkgconfig"  "withr"      "grDevices"  "graphics"   "stats"
```

---

layout: true
class: middle, center

---

# Did I convince you about data.table?

--

----

.pull-left[
This is not a full course on Data.Table (unfortunately) ...
]

--

.pull-right[
&lt;iframe src="https://giphy.com/embed/pPhyAv5t9V8djyRFJH" width="380" height="200" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/wtf-obama-wth-pPhyAv5t9V8djyRFJH"&gt;&lt;/a&gt;&lt;/p&gt;
]

--

.pull-right-narrow[
... but I will solve exercises using both dplyr and data.table side by side!
]

--

.center[
&lt;iframe src="https://giphy.com/embed/MNmyTin5qt5LSXirxd" width="400" height="200" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/theoffice-MNmyTin5qt5LSXirxd"&gt;&lt;/a&gt;&lt;/p&gt;
]

---
layout: true
class: middle, center

---

# In the meantime

----

.pull-left[
&lt;iframe src="https://giphy.com/embed/emLs5klEWTKlSVeexj" width="480" height="270" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/voice-actor-jeff-bergman-jeffbergman-emLs5klEWTKlSVeexj"&gt;&lt;/a&gt;&lt;/p&gt;
]
.pull-right[
- .left[[Introductory course](https://raw.githack.com/floswald/lectures/master/05-datatable/05-datatable.html) by Professor [Florian Oswald](https://floswald.github.io/) (SciencesPo) and Professor [Grant Mc Dermott](https://grantmcdermott.com/)]
- .left[The [full handbook](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html): 99% of you all neeed to know about the package]
- .left[[Package Documentation](https://cran.r-project.org/web/packages/data.table/index.html)]
- .left[[CheatSheet](https://github.com/Rdatatable/data.table#cheatsheets)]
- .left[Really nice, side-by-side [comparisons](https://atrebas.github.io/post/2019-03-03-datatable-dplyr/) of common data.table and dplyr operations]
]

---
layout: true
class: middle, center

---

# In the meantime

----

.pull-left[
&lt;iframe src="https://giphy.com/embed/emLs5klEWTKlSVeexj" width="480" height="270" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/voice-actor-jeff-bergman-jeffbergman-emLs5klEWTKlSVeexj"&gt;&lt;/a&gt;&lt;/p&gt;
]
.pull-right[
- .left[&lt;span style="background-color: yellow;"&gt; [Introductory course](https://raw.githack.com/floswald/lectures/master/05-datatable/05-datatable.html) by Professor [Florian Oswald](https://floswald.github.io/) (SciencesPo) and Professor [Grant Mc Dermott](https://grantmcdermott.com/)&lt;/span&gt;]
- .left[The [full handbook](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html): 99% of you all neeed to know about the package]
- .left[[Package Documentation](https://cran.r-project.org/web/packages/data.table/index.html)]
- .left[[CheatSheet](https://github.com/Rdatatable/data.table#cheatsheets)]
- .left[&lt;span style="background-color: yellow;"&gt; Really nice, side-by-side [comparisons](https://atrebas.github.io/post/2019-03-03-datatable-dplyr/) of common data.table and dplyr operations]&lt;/span&gt;]

---

class: inverse

# Task 1: Load the Packages

.left[We start loading all the necessary packages and set up]


```r
# 0: Setting R ----
    
    # Clean the workspace
    rm(list=ls()) 
    # Free Unused R memory
    gc()
    # Options for avoid scientific notation
    options(scipen = 9999)
    # Set the same seed
    set.seed(123)
    # list of package needed
    packages &lt;- 
      c( 
        "data.table",
        "dplyr",
        "stringr",
        "lubridate",
        "ggplot2"
      )
    # If the package is not installed, then install it 
    if (!require("pacman")) install.packages("pacman")
    # Load the packages 
    pacman::p_load(packages, character.only = TRUE, install = TRUE)

# 1: Setting Working Directories ----
        
  # Setting path
  if (Sys.getenv("USER") == "ruggerodoino") { # RA (World Bank-DIME)
    print("Ruggero has been selected")
    dropbox_dir  &lt;- "/Users/ruggerodoino/Dropbox/ChilePaymentProcurement/Reproducible-Package" 
    github_dir   &lt;- "/Users/ruggerodoino/Documents/GitHub/chile-payment-procurement/Reproducible-Package" 
  }
```

---

class: inverse

# Task 1: Load the Packages

.left[We start loading all the necessary packages and set up]


```r
# 0: Setting R ----
    
    # Clean the workspace
    rm(list=ls()) 
    # Free Unused R memory
    gc()
    # Options for avoid scientific notation
    options(scipen = 9999)
    # Set the same seed
    set.seed(123)
    # list of package needed
    packages &lt;- 
      c( 
        "data.table",
        "dplyr",
        "stringr",
        "lubridate",
        "ggplot2"
      )
    # If the package is not installed, then install it 
    if (!require("pacman")) install.packages("pacman")
    # Load the packages 
    pacman::p_load(packages, character.only = TRUE, install = TRUE)

# 1: Setting Working Directories ----
        
  # Setting path
  if (Sys.getenv("USER") == "ruggerodoino") { # RA (World Bank-DIME)
    print("Ruggero has been selected")
*   dropbox_dir  &lt;- "/Users/ruggerodoino/Dropbox/ChilePaymentProcurement/Reproducible-Package"
*   github_dir   &lt;- "/Users/ruggerodoino/Documents/GitHub/chile-payment-procurement/Reproducible-Package"
  }
```

---

class: inverse

# Task 1: Load the Packages

<div class="countdown" id="timer_71a031c2" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

.left[We start loading all the necessary packages and set up]


```r
# 0: Setting R ----
    
    # Clean the workspace
    rm(list=ls()) 
    # Free Unused R memory
    gc()
    # Options for avoid scientific notation
    options(scipen = 9999)
    # Set the same seed
    set.seed(123)
    # list of package needed
    packages &lt;- 
      c( 
        "data.table",
        "dplyr",
        "stringr",
        "lubridate",
        "ggplot2"
      )
    # If the package is not installed, then install it 
    if (!require("pacman")) install.packages("pacman")
    # Load the packages 
    pacman::p_load(packages, character.only = TRUE, install = TRUE)

# 1: Setting Working Directories ----
        
  # Setting path
  if (Sys.getenv("USER") == "ruggerodoino") { # RA (World Bank-DIME)
    print("Ruggero has been selected")
*   dropbox_dir  &lt;- "/Users/ruggerodoino/Dropbox/ChilePaymentProcurement/Reproducible-Package"
*   github_dir   &lt;- "/Users/ruggerodoino/Documents/GitHub/chile-payment-procurement/Reproducible-Package"
  }
```

---

layout: false
class: title-slide-section-red, middle

# Let's go 🧗‍♀️

---
class: middle, center

# .center[Main Challenges of Administrative Data]

--

----

.center[
🚰 Data Source
]

--
.center[
🗺 Data Structure
]

--

.center[
🎶 Data Harmonization
]

--

.center[
⛓ Data Integration
]

--

.center[
⚠️ Data inconsistencies and quality
]

--

.center[
🔀 Temporal Inconsistencies/Sample Unbalances
]

---

layout: false
class: title-slide-section-red, middle

# Data Source 🚰

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Source 

.pull-right-narrow[
#### 1) Origin of Administrative Data
]

.pull-left-wide[
  🔍 Administrative data primarily originate from the routine administrative processes of organizations and institutions. 
    
  🗒 Tax records, health records, school enrollment data, social service records, and employment records.
]

--

#### 2) Where to find them 

.pull-left-wide[
  🏛 The accessibility of administrative data largely depends on the policies of the data sources.
    
  🌐 Admin data is frequently sourced through web scraping to maintain reproducibility. --&gt; two resources that can help: [beginner](https://statsandr.com/blog/web-scraping-in-r/) and [advanced](https://r4ds.hadley.nz/webscraping.html). 
]

---

class: inverse

# Task 2: Load the Datasets

<div class="countdown" id="timer_659d3e3c" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

We first load the offer-level dataset:

.pull-left[


```r
# DATA.TABLE

# Load offer-level data
data_offer &lt;- fread(
  input = file.path(raw_data, "offer_level.csv"),
  encoding = "Latin-1",
  stringsAsFactors = TRUE, 
  colClasses = c(" |&gt; ", "character", "factor"), 
  na.strings = c("N/A", "Unknown"),
  showProgress = TRUE
)



#
```
]

.pull-right[

```r
# DPLYR

# Load offer-level data
data_offer &lt;- file.path(raw_data, "offer_level.csv") %&gt;%
  read_csv(
    col_types = cols(
      .default = col_character(),
      column_name_1 = col_double(),
      column_name_2 = col_character(),
      column_name_3 = col_factor()
    ),
    na = c("N/A", "Unknown"),
    progress = TRUE,
    locale = locale(encoding = "Latin-1")
  )
```
]

And, then we load the payment-level datasets:

.pull-left[


```r
# DATA.TABLE

# Load payment-level data
data_offer &lt;- fread(
  input = file.path(raw_data, "payment_level.csv"),
  encoding = "Latin-1",
  stringsAsFactors = TRUE, 
  colClasses = c("numeric", "character", "factor"), 
  na.strings = c("N/A", "Unknown"),
  showProgress = TRUE
)



#
```
]

.pull-right[

```r
# TYDIVERSE/DPLYR

# Load payment-level data
data_payment &lt;- file.path(raw_data, "payment_level.csv") %&gt;%
  read_csv(
    col_types = cols(
      .default = col_character(),
      column_name_1 = col_double(),
      column_name_2 = col_character(),
      column_name_3 = col_factor()
    ),
    na = c("N/A", "Unknown"),
    progress = TRUE,
    locale = locale(encoding = "Latin-1")
  )
```
]


---

layout: false
class: title-slide-section-red, middle

# Data Structure 🗺

---
class: middle, center
# Data Structure

--

.pull-left[
Once I received a folder with 14 datasets and no information whatsoever...
]

--

.pull-right[
&lt;iframe src="https://giphy.com/embed/pynZagVcYxVUk" width="280" height="180" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/the-office-michael-heartbreak-pynZagVcYxVUk"&gt;&lt;/a&gt;&lt;/p&gt;
]

--

.center[
... so what do we do? 
]

--

.center[
🔄 Understand the administrative process
]

--

.center[
🔗 Understand the data architecture built upon the administrative process
]

---

layout: false

class: title-slide, top, left, inverse
background-image: url("../img/logo/1_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/2_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/3_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/4_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/5_slide.jpg")
background-size: cover
---

class: title-slide, top, left, inverse
background-image: url("../img/logo/6_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/7_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/8_slide.jpg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/9_slide.jpg")
background-size: cover

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation

]

--

.right-wide[
📌 "The unit of observation, sometimes referred to as the unit of measurement, is defined statistically as the “who” or “what” for which data are measured or collected."([Philip Sedgwick](chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://www.bmj.com/content/bmj/348/bmj.g3840.full.pdf)) 
]

--

.right-wide[
💡 A unit of observation need to be &lt;b&gt;fully and uniquely identified by an ID&lt;/b&gt; - create an appropriate ID variable accordingly if it does not yet exist.
]

--

.right-wide[
1. &lt;i&gt;What's our unit of observation?&lt;/i&gt;
2. &lt;i&gt;What's our ID?&lt;/i&gt;
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis

]

--

.right-wide[
📌 "The unit of analysis is defined statistically as the “who” or “what” for which information is analysed and conclusions are made." ([Philip Sedgwick](chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://www.bmj.com/content/bmj/348/bmj.g3840.full.pdf))
]

--

.right-wide[
💡 Administrative data often encompass multiple levels of analysis, each corresponding to the various participants in the administrative procedure. 
]

--

.right-wide[
1. &lt;i&gt;What are all the potential units of analysis?&lt;/i&gt;
2. &lt;i&gt;What are their own IDs?&lt;/i&gt;
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis
### Mapping the Data

]

--

.right-wide[
📌 "Data flow charts allow the research team to visualize which datasets are needed in order to create the datasets that will finally be used for the analysis." ([DIME Analytics](https://dimewiki.worldbank.org/Data_Flow_Charts))
]

--

.right-wide[
🔨 Check this free [web-tool](https://www.lucidchart.com/pages/data-flow-diagram)!
]

--

.center[&lt;img src="../img/logo/diagram_1.svg" width="650px"/&gt;]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis
### Mapping the Data

]

.right-wide[
📌 "Data flow charts allow the research team to visualize which datasets are needed in order to create the datasets that will finally be used for the analysis." ([DIME Analytics](https://dimewiki.worldbank.org/Data_Flow_Charts))
]
.right-wide[
🔨 Check this free [web-tool](https://www.lucidchart.com/pages/data-flow-diagram)!
]
.center[&lt;img src="../img/logo/diagram_2.svg" width="650px"/&gt;]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis
### Mapping the Data

]

.right-wide[
📌 "Data flow charts allow the research team to visualize which datasets are needed in order to create the datasets that will finally be used for the analysis." ([DIME Analytics](https://dimewiki.worldbank.org/Data_Flow_Charts))
]
.right-wide[
🔨 Check this free [web-tool](https://www.lucidchart.com/pages/data-flow-diagram)!
]
.center[&lt;img src="../img/logo/diagram_3.svg" width="650px"/&gt;]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis
### Mapping the Data

]

.right-wide[
📌 "Data flow charts allow the research team to visualize which datasets are needed in order to create the datasets that will finally be used for the analysis." ([DIME Analytics](https://dimewiki.worldbank.org/Data_Flow_Charts))
]
.right-wide[
🔨 Check this free [web-tool](https://www.lucidchart.com/pages/data-flow-diagram)!
]
.center[&lt;img src="../img/logo/diagram_4.svg" width="650px"/&gt;]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis
### Mapping the Data

]

.right-wide[
📌 "Data flow charts allow the research team to visualize which datasets are needed in order to create the datasets that will finally be used for the analysis." ([DIME Analytics](https://dimewiki.worldbank.org/Data_Flow_Charts))
]
.right-wide[
🔨 Check this free [web-tool](https://www.lucidchart.com/pages/data-flow-diagram)!
]
.center[&lt;img src="../img/logo/diagram_5.svg" width="650px"/&gt;]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Structure

.left-thin[

### Unit of Observation
### Unit of Analysis
### Mapping the Data

]

.right-wide[
📌 "Data flow charts allow the research team to visualize which datasets are needed in order to create the datasets that will finally be used for the analysis." ([DIME Analytics](https://dimewiki.worldbank.org/Data_Flow_Charts))
]
.right-wide[
🔨 Check this free [web-tool](https://www.lucidchart.com/pages/data-flow-diagram)!
]
.center[&lt;img src="../img/logo/diagram_6.svg" width="650px"/&gt;]

---

layout: false
class: title-slide-section-red, middle

# Data Harmonization 🎶

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/data_harmonization.jpeg")
background-size: cover

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Harmonization

.left-thin[

### Naming Convention

]

--

.right-wide[
🏷 There are several &lt;b&gt;naming conventions&lt;/b&gt; [out there](https://bookdown.org/content/d1e53ac9-28ce-472f-bc2c-f499f18264a3/names.html). Here, we will follow the so-called "snake_case".
  - These names are all lower case with underscore between the name. My name in &lt;i&gt;snake_case&lt;/i&gt; would be &lt;i&gt;ruggero_doino&lt;i/&gt;.
]

--

.right-wide[
📖 &lt;b&gt;Controlled Vocabulary&lt;/b&gt; "The basic idea of controlled vocabularies is to define upfront a set of words, phrases, or stubs with well-defined meanings which can be used to index information." ([Emily Redierer](https://emilyriederer.netlify.app/post/column-name-contracts/))
]

--

.right-wide[
.center[
&lt;img src="https://i.imgflip.com/7xbz4n.jpg" width="320" height="160"/&gt;
]
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Harmonization

.left-thin[

### Naming Convention

]

.right-wide[
&lt;b&gt;Level 1: Measure Types&lt;/b&gt;:

  - &lt;b&gt;id&lt;/b&gt;: Unique identified for an entity.
  - &lt;b&gt;ind&lt;/b&gt;: Binary 0 or 1 indicator or an event occurrence
  - &lt;b&gt;n&lt;/b&gt;: Count of quantity or event occurrence
  - &lt;b&gt;amt&lt;/b&gt;: Sum-able real number amount. That is, any non-count amount that is “denominator-free”
  - &lt;b&gt;val&lt;/b&gt;: Numeric variables that are not inherently sum-able
  - &lt;b&gt;dt&lt;/b&gt;: Date of some event
  - &lt;b&gt;tm&lt;/b&gt;: Time stamp of some event
  - &lt;b&gt;cat&lt;/b&gt;: Categorical variable as a character string (potentially encoded from an ID field)
  - &lt;b&gt;str&lt;/b&gt;: String variable usually used for describing a characteristic 
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Harmonization

.left-thin[

### Naming Convention

]

.right-wide[
&lt;b&gt;Level 2: Measure Subjects&lt;/b&gt;

  - &lt;b&gt;buyer&lt;/b&gt;: public procuring entity
  - &lt;b&gt;firm&lt;/b&gt;: firm entity
  - &lt;b&gt;tender&lt;/b&gt;: auction 
  - &lt;b&gt;payment&lt;/b&gt;: payment transaction
  - &lt;b&gt;purchase&lt;/b&gt;: signed contract
  - &lt;b&gt;offer&lt;/b&gt;: offer submitted to the auction
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Harmonization

.left-thin[

### Naming Convention

]

.right-wide[
&lt;b&gt;Level 3-n: Details&lt;/b&gt;

  - &lt;b&gt;region&lt;/b&gt;: region of origin
  - &lt;b&gt;city&lt;/b&gt;: city of origin
  - &lt;b&gt;total&lt;/b&gt;: total value
  - &lt;b&gt;diff_ack_pay&lt;/b&gt;: difference between payment acknowledgment and actual payment
  - &lt;b&gt;send&lt;/b&gt;: date of start sending offers 
  - &lt;b&gt;unspsc&lt;/b&gt;: UNSPSC item classification code 
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Harmonization

.left-thin[

### Naming Convention

]

.right-wide[
&lt;b&gt;Putting it all together&lt;/b&gt;

  - &lt;b&gt;id_firm_tax&lt;/b&gt;: unique tax identifier for each firm
  - &lt;b&gt;str_firm_city&lt;/b&gt;: character string to define the origin city for each firm
  - &lt;b&gt;str_buyer_region&lt;/b&gt;: character string to define the origin region for each firm
  - &lt;b&gt;ind_offer_win&lt;/b&gt;: 1 if offer was selected 
  - &lt;b&gt;amt_offer_total&lt;/b&gt;: total amount offered 
  - &lt;b&gt;id_item_unspsc&lt;/b&gt;: unique UNSPSC identifier for each item 
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Harmonization

.left-thin[

### Naming Convention
### Variable Harmonization

]

.right-wide[
📋 Checklist:
  - &lt;b&gt;Dates&lt;/b&gt;: all dates ("dt_") need to be formatted as such, [lubridate](https://lubridate.tidyverse.org/) package is key: `lubridate::dmy()`
  - &lt;b&gt;Numeric&lt;/b&gt;: all numeric values ("n_"|"amt_") need to be formatted as such, `as.numeric()` (⚠️ sometimes decimal separators are coded with commas)
  - &lt;b&gt;Strings&lt;/b&gt;: 
    - `stringr::str_squish()` removes whitespace before and after strings, and reduced repeated interior whitespace to a single space 
    - `stringr::str_to_lower()` converts to lowercase
    - `stringr::str_remove_all("[^[:alnum:]]")` can be used to remove all non-alphanumeric characters
  - &lt;b&gt;Factors&lt;/b&gt;: all factor variables ("ind_") need to be formatted as such, `as.factor()`
  - &lt;b&gt;Coded Identifiers&lt;/b&gt;: all IDs ("id_"), when standardized, should be verified. Example: tax identifiers
]

---

layout: false
class: title-slide-section-red, middle

# Data Integration ⛓

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/first_data_harmonization.jpeg")
background-size: cover

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/second_data_integration.jpeg")
background-size: cover

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

📋 Checklist:
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

📋 Checklist:
  1. ✅ &lt;b&gt;Understand Your Data&lt;/b&gt;: familiarize yourself with the structure, format, and quality of your data sources.

]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

📋 Checklist:
  1. ✅ &lt;b&gt;Understand Your Data&lt;/b&gt;: familiarize yourself with the structure, format, and quality of your data sources.
  2. ❌ &lt;b&gt;Lack of Familiarity&lt;/b&gt;: &lt;u&gt;avoid&lt;/u&gt; integrating data when its quality and structure are in doubt.

]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

📋 Checklist:
  1. ✅ &lt;b&gt;Understand Your Data&lt;/b&gt;: familiarize yourself with the structure, format, and quality of your data sources.
  2. ❌ &lt;b&gt;Lack of Familiarity&lt;/b&gt;: &lt;u&gt;avoid&lt;/u&gt; integrating data when its quality and structure are in doubt.
  3. ✅ &lt;b&gt;Define Clear Objectives&lt;/b&gt;: clearly define the purpose of merging or integrating (💡 you can always map the data).

]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

📋 Checklist:
  1. ✅ &lt;b&gt;Understand Your Data&lt;/b&gt;: familiarize yourself with the structure, format, and quality of your data sources.
  2. ❌ &lt;b&gt;Lack of Familiarity&lt;/b&gt;: &lt;u&gt;avoid&lt;/u&gt; integrating data when its quality and structure are in doubt.
  3. ✅ &lt;b&gt;Define Clear Objectives&lt;/b&gt;: clearly define the purpose of merging or integrating (💡 you can always map the data).
  4. ✅ &lt;b&gt;Ensure Consistent Data Types&lt;/b&gt;: before merging, make sure that columns you're joining on have consistent data types in both tables.
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[

⛓ Integrating or merging data from different sources or tables is a common task in data management and analytics. 

📋 Checklist:
  1. ✅ &lt;b&gt;Understand Your Data&lt;/b&gt;: familiarize yourself with the structure, format, and quality of your data sources.
  2. ❌ &lt;b&gt;Lack of Familiarity&lt;/b&gt;: &lt;u&gt;avoid&lt;/u&gt; integrating data when its quality and structure are in doubt.
  3. ✅ &lt;b&gt;Define Clear Objectives&lt;/b&gt;: clearly define the purpose of merging or integrating (💡 you can always map the data).
  4. ✅ &lt;b&gt;Ensure Consistent Data Types&lt;/b&gt;: before merging, make sure that columns you're joining on have consistent data types in both tables.
  5. ✅ &lt;b&gt;Document the Process&lt;/b&gt;: ensure that every step, decision, and assumption made during the integration process is well-documented.
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging

]

.right-wide[
#### The Ultimate Triad of Merging
]
--
.right-wide[
&lt;ol start="1"&gt;
  &lt;li&gt;🔑 &lt;b&gt;Key Matching&lt;/b&gt;: ensure that you have &lt;u&gt;&lt;b&gt;unique&lt;/b&gt;&lt;/u&gt; and &lt;u&gt;&lt;b&gt;non-missing&lt;/b&gt;&lt;/u&gt; keys to match on. &lt;/li&gt;
&lt;/ol&gt;
]


--
.right-wide[
&lt;ol start="2"&gt;
  &lt;li&gt;⚖️ &lt;b&gt;Same Granularity Level&lt;/b&gt; avoid merging data directly if they are not at the  &lt;u&gt;&lt;b&gt;same level of granularity&lt;/b&gt;&lt;/u&gt;. Aggregate or disaggregate data to the appropriate level before merging. &lt;/li&gt;
&lt;/ol&gt;
]

--
.right-wide[
&lt;ol start="3"&gt;
  &lt;li&gt;⬅️ &lt;b&gt;99% Left Joins&lt;/b&gt;: using a left join can ensure you retain all records from your primary (left) table. This ensures you &lt;u&gt;&lt;b&gt;don't lose any data&lt;/b&gt;&lt;/u&gt;, but it can introduce null values for unmatched records. &lt;/li&gt;
&lt;/ol&gt;
]

---


&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching

]

.right-wide[

🤔 What happens if we don't have a clear, consistent and unique ket to match on?

]
--
.right-wide[

&lt;i&gt;Example: say that we want to match sector names with ISIC standardized sector codes&lt;/i&gt;

]
---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching

]

.right-wide[

🤔 What happens if we don't have a clear, consistent and unique ket to match on?

&lt;i&gt;Example: say that we want to match sector names with ISIC standardized sector codes&lt;/i&gt;

  1. 🎶 Data Harmonization is key here. Ensure that texts are clean following the best practices, and sometimes you just need to do some further steps (&lt;i&gt;Example: "Retail and Services Sector" vs "Retail and Services"&lt;/i&gt;)
  
]
---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching

]

.right-wide[

🤔 What happens if we don't have a clear, consistent and unique ket to match on?

&lt;i&gt;Example: say that we want to match sector names with ISIC standardized sector codes&lt;/i&gt;


  1. 🎶 Data Harmonization is key here. Ensure that texts are clean following the best practices, and sometimes you just need to do some further steps (&lt;i&gt;Example: "Retail and Services Sector" vs "Retail and Services"&lt;/i&gt;).
  2. 🧩 `library(stringdist)` provides several methods to compute string distances and perform approximate string matching, or you can use the `library(fuzzyjoin)` that performs joins using the same methods. 
  
]

---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching

]

.right-wide[

🤔 What happens if we don't have a clear, consistent and unique ket to match on?

&lt;i&gt;Example: say that we want to match sector names with ISIC standardized sector codes&lt;/i&gt;

  1. 🎶 Data Harmonization is key here. Ensure that texts are clean following the best practices, and sometimes you just need to do some further steps (&lt;i&gt;Example: "Retail and Services Sector" vs "Retail and Services"&lt;/i&gt;).
  2. 🧩 `library(stringdist)` provides several methods to compute string distances and perform approximate string matching, or you can use the `library(fuzzyjoin)` that performs joins using the same methods. 
  3. 🤖 [ChatGPT](https://chat.openai.com/) (3.5 or 4 is better)... say no more!
  
]

---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching
### Data Lake

]

.right-wide[

#### Make Data Lake Great Again! 
  
]

---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching
### Data Lake

]

.right-wide[

#### Make Data Lake Great Again! ☁️

&lt;s&gt;Less is More&lt;/s&gt; More is More
  
]

---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching
### Data Lake

]

.right-wide[

#### Make Data Lake Great Again! ☁️

&lt;s&gt;Less is More&lt;/s&gt; More is More

.center[
&lt;img src="../img/logo/diagram.jpg" width="420" height="360"/&gt;
]
  
]

---
&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Integration

.left-thin[

### Merging
### Fuzzy Matching
### Data Lake

]

.right-wide[
#### Why don't we just use a &lt;i&gt;one for rule them all&lt;i/&gt;? 
]
--
.right-wide[
- &lt;b&gt;Modularity&lt;/b&gt;: Each dataset remains independent and can be updated without affecting the others.
]
--
.right-wide[
- &lt;b&gt;Efficiency&lt;/b&gt;: 1) No redundancy: Only relevant data is integrated when necessary and 2) Faster processing: Smaller datasets are quicker to load, analyze, and modify.
]
--
.right-wide[
- &lt;b&gt;Flexibility&lt;/b&gt;: Allows for easy integration of future datasets.
]
--
.right-wide[
- &lt;b&gt;Simplified Data Maintenance&lt;/b&gt;: If a change is needed, it can be implemented in the relevant dataset without the need to overhaul a massive combined dataset.

]

---

class: inverse

# Task 3: Excercise about Aggregating an Joining at different levels

<div class="countdown" id="timer_ccebf996" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

Ideas? Need to fill this yet. 

---

layout: false
class: title-slide-section-red, middle

# Data Inconsistencies and Sample Unbalances ⚠️

---

class: title-slide, top, left, inverse
background-image: url("../img/logo/outlier.jpeg")
background-size: cover

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values

]

--

.right-wide[
📌 Missing values refer to the absence of data in a dataset. They can arise for a variety of reasons, including: 
  - Observations that were not recorded or collected.
  - Errors during data collection or entry.
  - Intentional omission due to reasons like privacy concerns.
]
--
.right-wide[
✅ How they look like:
  - `NA` a missing value is a missing value
]
--
.right-wide[
❌ How they &lt;b&gt;do not&lt;/b&gt; look like:
  - `0` zero is a number
  - `" "` an empyt space is an empty space
  - `"."` a dot is a dot
  - `"NA"` a string is a string 
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values

]

.right-wide[
##### You can treat &lt;u&gt;usptream&lt;/u&gt; or &lt;u&gt;downstream&lt;/u&gt;:

- some packages allow you to define the type of variables when you load them 


```r
data_offer &lt;- fread(
...,
  na.strings = c("N/A", "Unknown"),
...)
```

- otherwise, we can manually change them later on, but I prefer the first option (just better workflow)
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values
### Outliers

]

.right-wide[
📌 "An outlier is “an observation that deviates so much from other observations as to arouse suspicion that it was generated by a different mechanism” ([Hawkins 1980](https://api.semanticscholar.org/CorpusID:121985057))
]

--

.right-wide[
Here are some common causes of outliers:
- Human errors, e.g. data entry errors 
- Instrument errors, e.g. measurement errors 
- Data processing errors, e.g. data manipulation 
- Not an error, the value is extreme, just a ‘novelty’ in the data
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values
### Outliers

]

.center[
&lt;img src="../img/logo/histogram_1.png" width="720" height="560"/&gt;
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values
### Outliers

]

.center[
&lt;img src="../img/logo/histogram_2.png" width="720" height="560"/&gt;
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values
### Outliers

]

.center[
&lt;img src="../img/logo/histogram_3.png" width="720" height="560"/&gt;
]

---

&lt;div class="my-footer"&gt;&lt;img src="../img/logo/WBG_Vertical-RGB-high.png" style="height: 60px;"/&gt;&lt;/div&gt; 

# Data Inconsistencies and Sample Unbalances

.left-thin[

### Missing Values
### Outliers
### Sample Imbalances

]

---

class: inverse

# Task 3: Excercise about Aggregating an Joining at different levels

<div class="countdown" id="timer_891abc50" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

Ideas? Need to fill this yet. 

---

layout: false
class: center

.center[
&lt;b&gt;Major Credits&lt;/b&gt; to :
]

.left[
- Thiago Scot, Antoine Debb, Maria, and Tatiana for feedbacks.
- Professor Florand from whom I used a lot of resources especially for building the presentation
- Professor 
- Blog Emily
- Blog that I used for packages 
- 
]

---

layout: true
class: middle, center

---

# THANKS!

.center[
Time to help me now! 🙏
]
.center[
&lt;img src="../img/logo/form_google.jpg" width="280" height="260"/&gt;
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../js/ru_xaringan.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
